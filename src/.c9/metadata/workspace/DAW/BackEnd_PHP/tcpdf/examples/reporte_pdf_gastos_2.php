{"filter":false,"title":"reporte_pdf_gastos_2.php","tooltip":"/DAW/BackEnd_PHP/tcpdf/examples/reporte_pdf_gastos_2.php","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":151,"column":2},"action":"insert","lines":["<?php","","    session_start();","    include_once(\"../../util.php\");","    if (checkSession()) {","        ","            // Include the main TCPDF library (search for installation path).","    require_once('tcpdf_include.php');","    ","    ","    // Extend the TCPDF class to create custom Header and Footer","    class MYPDF extends TCPDF {","    ","    \t//Page header","    \tpublic function Header() {","    \t\t// Logo","    \t\t$image_file = K_PATH_IMAGES.'fimLogo.jpg';","    \t\t$this->Image($image_file, 8, 8, 15, '', 'JPG', '', 'T', false, 500, '', false, false, 0, false, false, false);","    \t\t// Set font","    \t\t$this->SetFont('helvetica', 'B', 20);","    \t\t// Title","    \t\t$this->Cell(0, 15, 'Formación Integral de la Mujer IAP', 0, false, 'C', 0, '', 0, false, 'M', 'M');","    \t}","    ","    \t// Page footer","    \tpublic function Footer() {","    \t\t// Position at 15 mm from bottom","    \t\t$this->SetY(-15);","    \t\t// Set font","    \t\t$this->SetFont('helvetica', 'I', 8);","    \t\t// Page number","    \t\t$this->Cell(0, 10, 'Page '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M');","    \t}","    }","    ","    // create new PDF document","    $pdf = new MYPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);","    ","    // set document information","    $pdf->SetCreator(PDF_CREATOR);","    $pdf->SetAuthor('FIM');","    $pdf->SetTitle('Gastos FIM');","    $pdf->SetSubject('');","    $pdf->SetKeywords('PDF, reporte');","    ","    // set default header data","    $pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE, PDF_HEADER_STRING);","    ","    // set header and footer fonts","    $pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));","    $pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));","    ","    // set default monospaced font","    $pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);","    ","    // set margins","    $pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);","    $pdf->SetHeaderMargin(PDF_MARGIN_HEADER);","    $pdf->SetFooterMargin(PDF_MARGIN_FOOTER);","    ","    // set auto page breaks","    $pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);","    ","    // set image scale factor","    $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);","    // ---------------------------------------------------------","    ","    // set font","    $pdf->SetFont('dejavusans', '', 10);","","    // add a page","    $pdf->AddPage();","","// create some HTML content","        $html= '<h2 style = \"text-align: right\"> Gastos</h2>';","        $html.= '<table class=\" bordered striped centered\">","                <thead>","                  <tr>","                      <th><strong>Descripción</strong></th>","                      <th><strong>Monto</strong></th>","                      <th><strong>Fecha</strong></th>","                  </tr>","                </thead>","                <tbody>';","        ","        if(isset($_GET[\"FI\"])&&isset($_GET[\"FF\"])){","        ","            $gastos=consultarGastoPorFecha($_GET[\"FI\"], $_GET[\"FF\"]);","            if(mysqli_num_rows($gastos)>0){","                while($renglon=mysqli_fetch_assoc($gastos)){","                    $html.=\"<tr>\";","                    $html.=\"<td>\". $renglon[\"descripcion\"] . \"</td>\";","                    $html.=\"<td>\". $renglon[\"monto\"]. \"</td>\";","                    $html.=\"<td>\". $renglon[\"fecha\"]. \"</td>\";","                    $html.=\"</tr>\";","                }","                $html.='</tbody>';","                $html.='</table>';","                ","            }","            ","            $total=consultarTot($_GET[\"FI\"], $_GET[\"FF\"]);","            ","            if(mysqli_num_rows($total)>0){","                while($renglon=mysqli_fetch_assoc($total)){","                    $html.= '<br><br><p style=\"text-align: right;\"> TOTAL: '. $renglon[\"sum(monto)\"] . \"</p>\" ;","                }","            }","        }else{","            $registros=ultimosGastos();","            if(mysqli_num_rows($registros)>0){","                ","                while($renglon=mysqli_fetch_assoc($registros)){","                    $html.= \"<tr>\";","                        $html.= \"<td>\". $renglon[\"descripcion\"] . \"</td>\";","                        $html.= \"<td>\". $renglon[\"monto\"]. \"</td>\";","                        $html.= \"<td>\". $renglon[\"fecha\"]. \"</td>\";","                    $html.= \"</tr>\";","                }","                    $html.= '</tbody>';","                $html.= '</table>';","            ","            $total=consultarTotal();","            ","            if(mysqli_num_rows($total)>0){","                while($renglon=mysqli_fetch_assoc($total)){","                    $html.= '<br><br><p style=\"text-align: right;\"> TOTAL: '. $renglon[\"sum(monto)\"] . \"</p>\" ;","                }","            }","        }            ","        }","","","// output the HTML content","$pdf->writeHTML($html, true, false, true, false, '');","","","    // ---------------------------------------------------------","    ","    //Close and output PDF document","    $pdf->Output('reporte.pdf', 'I');","    ","    //============================================================+","    // END OF FILE","    //============================================================+","    ","    ","","    }else{","        header(\"Location:admin.php?sessionexpired=true\");","    }","?>"],"id":1}],[{"start":{"row":87,"column":12},"end":{"row":99,"column":13},"action":"remove","lines":["$gastos=consultarGastoPorFecha($_GET[\"FI\"], $_GET[\"FF\"]);","            if(mysqli_num_rows($gastos)>0){","                while($renglon=mysqli_fetch_assoc($gastos)){","                    $html.=\"<tr>\";","                    $html.=\"<td>\". $renglon[\"descripcion\"] . \"</td>\";","                    $html.=\"<td>\". $renglon[\"monto\"]. \"</td>\";","                    $html.=\"<td>\". $renglon[\"fecha\"]. \"</td>\";","                    $html.=\"</tr>\";","                }","                $html.='</tbody>';","                $html.='</table>';","                ","            }"],"id":2}],[{"start":{"row":85,"column":8},"end":{"row":96,"column":9},"action":"remove","lines":["if(isset($_GET[\"FI\"])&&isset($_GET[\"FF\"])){","        ","            ","            ","            $total=consultarTot($_GET[\"FI\"], $_GET[\"FF\"]);","            ","            if(mysqli_num_rows($total)>0){","                while($renglon=mysqli_fetch_assoc($total)){","                    $html.= '<br><br><p style=\"text-align: right;\"> TOTAL: '. $renglon[\"sum(monto)\"] . \"</p>\" ;","                }","            }","        }"],"id":3}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"remove","lines":["e"],"id":4}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"remove","lines":["l"],"id":5}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"remove","lines":["s"],"id":6}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"remove","lines":["e"],"id":7}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"remove","lines":["{"],"id":8}],[{"start":{"row":106,"column":5},"end":{"row":108,"column":0},"action":"remove","lines":["   }            ","        }",""],"id":9}],[{"start":{"row":86,"column":36},"end":{"row":86,"column":37},"action":"insert","lines":["T"],"id":10}],[{"start":{"row":86,"column":37},"end":{"row":86,"column":38},"action":"insert","lines":["o"],"id":11}],[{"start":{"row":86,"column":38},"end":{"row":86,"column":39},"action":"insert","lines":["t"],"id":12}],[{"start":{"row":86,"column":39},"end":{"row":86,"column":40},"action":"insert","lines":["a"],"id":13}],[{"start":{"row":86,"column":40},"end":{"row":86,"column":41},"action":"insert","lines":["l"],"id":14}],[{"start":{"row":86,"column":41},"end":{"row":86,"column":42},"action":"insert","lines":["e"],"id":15}],[{"start":{"row":86,"column":42},"end":{"row":86,"column":43},"action":"insert","lines":["s"],"id":16}]]},"ace":{"folds":[],"scrolltop":955.5,"scrollleft":11,"selection":{"start":{"row":98,"column":12},"end":{"row":98,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":46,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1494337064969,"hash":"fb16ab72c1dc8a07bae8d0399443ded64ce10c70"}